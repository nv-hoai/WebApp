@model List<FastFood.MVC.Models.Order>
@using System.Globalization
@{
    ViewBag.Title = "Đơn hàng của tôi";
    var viCulture = CultureInfo.GetCultureInfo("vi-VN");
}

<h3 class="mt-3 mb-3">Danh sách đơn hàng của tôi</h3>

@if (!Model.Any())
{
    <div class="alert alert-info">Bạn chưa có đơn hàng nào.</div>
}
else
{
    <table class="table table-bordered table-striped">
        <thead>
            <tr class="text-center">
                <th>Mã đơn</th>
                <th>Ngày tạo</th>
                <th>Địa chỉ</th>
                <th>Phương thức giao hàng</th>
                <th>Tổng tiền hàng</th>
                <th>Phí giao hàng</th>
                <th>Tổng tiền thanh toán</th>
                <th>Trạng thái</th>
                <th>Người giao hàng</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var order in Model)
            {
                <tr>
                    <td class="text-center">@order.OrderID</td>
                    <td>@order.CreatedAt.ToString("dd/MM/yyyy HH:mm")</td>
                    <td>@order.Address</td>
                    <td>@order.ShippingMethod</td>
                    <td class="text-center">
                        @((order.SubTotal * 1000).ToString("#,##0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))) VND
                    </td>
                    <td class="text-center">
                        @((order.ShippingFee * 1000).ToString("#,##0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))) VND
                    </td>
                    <td class ="text-center">
                        @((order.TotalCharge * 1000)?.ToString("#,##0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))) VND
                    </td>
                    <td class="text-center">
                        @switch (order.Status)
                        {
                            case OrderStatus.Pending:
                                @:<span class="badge bg-secondary">Mới tạo</span>
                                break;
                            case OrderStatus.Processing:
                                @:<span class="badge bg-warning text-dark">Đang xử lý</span>
                                break;
                            case OrderStatus.Delivering:
                                @:<span class="badge bg-info text-dark">Đang giao</span>
                                break;
                            case OrderStatus.Completed:
                                @:<span class="badge bg-success">Hoàn tất</span>
                                break;
                            case OrderStatus.Cancelled:
                                @:<span class="badge bg-danger">Đã hủy</span>
                                break;
                        }
                    </td>
                    <td>@order.ShipperID</td>
                    <td class="text-center">
                        <a asp-action="MyOrderDetails" asp-controller="Order" asp-route-orderID="@order.OrderID" class="btn btn-sm btn-primary">
                            Xem
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
